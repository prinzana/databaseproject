<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>login</title>
    <link rel="stylesheet" href="/landingpage.css">
    <link rel="stylesheet" href="/signup2.css">
    <link rel="stylesheet" href="/signup.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>


<body>
   
    <body>
        <!-- Navigation Bar -->
        <nav class="navbar">
            <div class="logo">
                <a href="home.html">
                    <img src="/images/log.jpg" alt="Amon Data Centre Logo">
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="Home.html">Home</a></li>
                <li><a href="index.html">Sign Up</a></li>
            </ul>
        </nav>
    
        <body>
            <!-- Add this div to your Forgot Password page -->
<div id="message" class="message-container"> success</div>

           <!-- Reset Password Section -->
    <div class="reset-container">
        <div class="reset-form">
            <h1>Reset Password</h1>
            <form id="reset-password-form" method="post">
                <!-- Hidden input to store the token -->
                <input type="hidden" id="token" name="token">

                <!-- New Password Input -->
                <label for="new-password"></label><br>
                <input type="password" id="new-password" name="newPassword" placeholder="New Password" required>

                <!-- Confirm Password Input -->
                <br><label for="confirm-password"></label><br>
                <input type="password" id="confirm-password" name="confirmPassword" placeholder="Confirm Password" required>

                <!-- Reset Password Button -->
                <br><button type="submit" class="btn-primary">Reset Password</button>
            </form>
            <p class="login-link">Remembered your password? <a href="login.html">Sign In</a></p>
        </div>
    </div>

    <script>
        // Extract the token from the URL and set it in the hidden token field
        document.addEventListener("DOMContentLoaded", function () {
            const url = window.location.pathname;
            const token = url.split('/').pop(); // Token will be the last part of the URL
            document.getElementById('token').value = token;
        });

        // Handle form submission for password reset
        document.getElementById('reset-password-form').addEventListener('submit', async function (event) {
            event.preventDefault(); // Prevent default form submission

            const token = document.getElementById('token').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            if (newPassword !== confirmPassword) {
                alert('Passwords do not match!');
                return;
            }

            try {
                const response = await fetch(`/api/users/reset-password/${token}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ newPassword, confirmPassword }), // Send both passwords
                });

                const result = await response.json();

                if (response.ok) {
                    alert('Password has been reset successfully!');
                    window.location.href = '/login.html'; // Redirect to login page
                } else {
                    alert(result.message || 'Failed to reset password. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Server error. Please try again later.');
            }
        });
    </script>

    <style>.message-container {
        display: none; /* Initially hidden */
        margin: 20px 0;
        padding: 15px;
        border-radius: 5px;
        text-align: center;
        font-size: 16px;
        width: 80%; /* Adjust as necessary */
        max-width: 500px; /* Set a max width */
        margin-left: auto;
        margin-right: auto;
    }
    
    .message-container.success {
        background-color: #d4edda; /* Light green background */
        color: #155724; /* Dark green text */
        border: 1px solid #c3e6cb; /* Green border */
    }
    
    .message-container.error {
        background-color: #f8d7da; /* Light red background */
        color: #721c24; /* Dark red text */
        border: 1px solid #f5c6cb; /* Red border */
    }
    </style>
        </body>
        
    </body>
    </html>
 

<style>

/* Basic Reset */
/* Basic Reset */

body {
 
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

/* Container for the reset form */
.reset-container {
    width: 200%;
    max-width: 500px; /* Increased max width */
    background: white;
    padding: 50px; /* Increased padding */
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

/* Styling for the reset form */
.reset-form {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

/* Heading style */
.reset-form h1 {
    margin-bottom: 20px;
    color: #333;
    text-align: center;
}

/* Label styling */
.reset-form label {
    margin-bottom: 8px;
    color: #555;
}

/* Input field styling */
.reset-form input {
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 16px;
}

/* Input field focus styling */
.reset-form input:focus {
    border-color: #007bff;
    outline: none;
}

/* Button styling */
.btn-primary {
    background-color: #007bff;
    color: white;
    padding: 10px;
    border: none;
    border-radius: 4px;
    font-size: 16px;
    cursor: pointer;
}

.btn-primary:hover {
    background-color: #0056b3;
}

/* Link styling */
.login-link {
    margin-top: 10px;
    text-align: center;
}

.login-link a {
    color: #007bff;
    text-decoration: none;
}

.login-link a:hover {
    text-decoration: underline;
}

/* Responsive styling for smaller screens */
@media (max-width: 600px) {
    .reset-container {
        width: 90%; /* Adjust width for smaller screens */
    }
}


</style>


<script src="/Register.js"></script>








    





















    <!-- Script to Toggle Mobile Menu -->
    <script>
        const menuToggle = document.getElementById('menu-toggle');
        const closeMenu = document.getElementById('close-menu');
        const navLinks = document.querySelector('.nav-links');

        // Function to open the mobile menu
        function openMenu() {
            navLinks.classList.add('show');
            closeMenu.style.display = 'block'; // Show close button
        }

        // Function to close the mobile menu
        function closeMenuFunc() {
            navLinks.classList.remove('show');
            closeMenu.style.display = 'none'; // Hide close button
        }

        menuToggle.addEventListener('click', openMenu);
        closeMenu.addEventListener('click', closeMenuFunc);

        // Close the menu when clicking outside of it
        document.addEventListener('click', function(event) {
            if (!navLinks.contains(event.target) && event.target !== menuToggle) {
                closeMenuFunc();
            }
        });
    </script>

</body>
</html>






